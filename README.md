# 🎛️NAI utils

NAIがちょっと便利になるかもしれない機能をまとめたChrome拡張です。

![image](https://github.com/user-attachments/assets/37facf3d-d124-42f8-b7ab-0078212f0435)

## 📲インストール

1. [Releases](https://github.com/xmitoux/nai-utils/releases)から`nai-utils.zip`をダウンロードし、解凍します。
2. ChromeのURL欄に`chrome://extensions/`と入力し、拡張機能の管理画面に移動します。
3. 右上隅で「デベロッパーモード」をONにします。
4. 「パッケージ化されていない拡張機能を読み込む」をクリックし、手順1.で解凍された"dist"フォルダを選択すると拡張機能がインストールされます。
    - 再インストール時は前のバージョンを削除しておいてください。

## ⚠注意事項

-   本拡張機能は完璧な動作や性能を保証するものではありません。  
     本拡張機能の使用によって生じた問題や損害について、開発者はいかなる責任も負いかねます。  
     上記の点をご理解いただいた上、自己責任でのご利用をお願いいたします。

> [!CAUTION]
>
> -   予期せぬ動作やエラーを避けるため、Anlasの購入やサブスクリプションプランの変更などの重要な操作を行う場合、**必ず拡張機能を停止してください。**
> -   停止するには、画像のようにChromeの拡張機能管理画面で NAI utils のスイッチをOFFにし、NAIをリロードします。

![Image](https://github.com/user-attachments/assets/a970e1ce-37a7-4405-9a0f-0d04aa5aa30e)

## ⚙️設定

-   Chromeのメニューバーの拡張機能ボタンを押し、`NAI utils`を選択すると各機能のON/OFFを設定するページが開きます。
-   各設定を反映する場合は、NAIのページリロードが必要です。

## 🧩機能一覧

### 🕘生成履歴機能

#### 生成履歴の右クリック保存

生成履歴エリアを右クリックで表示中の画像を保存します。

#### 生成履歴のマウスホイール選択

-   生成履歴エリアでマウスホイールすると画像を選択します。
-   `Alt`キーを押している間は通常のスクロールをします。

#### 閲覧済みの生成履歴の強調

一度選択した生成履歴画像に薄い赤色の枠線を付け、閲覧済みであることをわかりやすくします。

#### 生成履歴の即時削除

削除確認ダイアログを表示せず、すぐに削除します。

#### ⚠️生成履歴機能の注意事項

inpaint画面を開いた直後は機能が失われますが、1枚生成すると元に戻ります。

### 👀見た目の機能

#### 画像設定欄を生成画像上部に移動する

プロンプト欄下にある生成枚数とアスペクト比の設定欄を生成画像の上に移動します。

#### モデル選択欄の非表示

モデル選択欄を非表示にし、プロンプト欄とi2i欄の表示領域を広げます。

#### Director Toolsボタンの非表示

Director Toolsボタンを非表示にします。

#### スタート画面の非表示

NAI初期表示時のスタート画面(サンプル画像一覧)を非表示にします。

### 🛠️その他の機能

#### 画面上のどこでも Ctrl + Enter で生成

`Ctrl + Enter`で画面上のどこにフォーカスがあっても生成を行います。

#### 保存ファイル名を<日時-シード値>にする

-   ファイル名をデフォルトの`プロンプト s-シード値.png`から`yyyyMMddHHmmsss-シード値.png`に変更します。
-   ⚠️この機能がONの場合、inpaint画面を開くと生成履歴保存ボタンの状態が失われ、保存済みの灰色が白色に戻ります。NAI標準とは異なる動作となりますのでご注意ください。

#### 一部の数値設定スライダーに +/- ボタンを表示する

-   スライダーでの数値設定をボタンでもできるようにします。
-   対象のスライダーは以下のとおりです。
    -   inpaintのペンサイズ
    -   i2iのStrength・Noise

#### Inpaint用のショートカットキーを使用する

-   Inpaint画面で専用のショートカットキーを使えるようにします。

##### ペンサイズを変更する

-   `↑` / `→`キー: `+1`
-   `↓` / `←` キー: `-1`
-   `Ctrl`キー同時押しで`5`増減

##### マスクを削除する

-   `Delete`キー: マスクを全て削除する
-   標準の🗑️ボタンと同等の操作

##### 変更を確定する

-   `Enter`キー: 変更を確定してInpaintを閉じる
-   標準の`Save & Close`ボタンと同等の操作

##### 変更をキャンセルする

-   `Esc` / `Backspace`キー: 変更をキャンセルしてInpaintを閉じる
-   標準の❌️ボタンと同等の操作

> [!NOTE]
> 以下のNAI標準ショートカットキーも使用できます。
>
> -   ペンに変更する: `B`キー (`B`rush)
> -   消しゴムに変更する: `E`キー (`E`raser)
> -   変更を元に戻す: `Ctrl` + `Z`キー
> -   変更をやり直す: `Ctrl` + `Y`キー

#### Anlas消費時の確認ダイアログを表示する

-   Anlasを消費する操作を行う際に はい/ いいえ の確認ダイアログを表示するようにします。いいえを選択すると操作を中止します。
-   対象の操作は以下の通りです。
    -   複数枚生成
    -   Upscale
    -   Variation生成

#### 生成完了時に音を鳴らす

-   生成完了時に音を鳴らします。
-   音はデフォルトのものから変更可能です。任意のmp3ファイルを`generated-sound.mp3`にリネームし、解凍した拡張機能のフォルダ配下の`dist/assets/`に置いたあと、NAIをリロードしてください。

> [!WARNING]
> 現在のバージョンでは動作が不安定です(鳴るときと鳴らないときがあります)。
